<div class="panel">
    <div class="panel-body">
        <div ng-include="'pages/tabs.html'"></div>
        <div class="panel">
            <div class="panel-body">
                <div class="row">
                    <div class="panel-group col-md-12" ng-model="multiplePanels.activePanels"
                        role="tablist" bs-collapse data-allow-multiple="true"
                        aria-multiselectable="true">
                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab">
                                <h4 class="panel-title">
                                    <a bs-collapse-toggle>
                                        <span i18n="common.Actions"></span>
                                    </a>
                                </h4>
                            </div>
                            <div class="panel-collapse" role="tabpanel" bs-collapse-target>
                                <div class="panel-body form-horizontal">
                                    <div class="row">
                                        <div class="col-md-1">
                                            <button type="button" class="btn btn-default"
                                                style="width: 37.16px"
                                                ng-click="clearSearchFilter()"
                                                data-i18n-attr="{title: 'common.Clear_filter'}">
                                                <span class="fa fa-ban"></span>
                                            </button>
                                            <button type="button" class="btn btn-default"
                                                style="width: 37.16px"
                                                ng-click="search()"
                                                data-i18n-attr="{title: 'common.Refresh_search_results'}">
                                                <span class="fa fa-refresh"></span>
                                            </button>
                                            <button type="button"
                                                data-i18n-attr="{title: 'common.Add_estate'}"
                                                style="width: 37.16px"
                                                ng-show="showCreateNewKiinteistoButton"
                                                ng-click="toggleCreateKiinteistoTool()" class="btn"
                                                ng-class="createKiinteistoTool == true ? 'btn-primary active' : 'btn-success'">
                                                <span class="fa fa-plus"></span>
                                            </button>                                            
                                            <button class="btn btn-default" type="button"
                                                style="width: 37.16px" ng-show="!polygonRajaus"
                                                ng-click="toggleDrawingTool()"
                                                ng-class="drawingTool == true ? 'btn btn-default active' : 'btn btn-default'"
                                                data-i18n-attr="{title: 'common.Draw_geometry_filter'}">
                                                <span class="fa fa-pencil-square-o"
                                                    aria-hidden="true"> </span>
                                            </button>
                                            <button class="btn btn-warning" type="button"
                                                style="width: 37.16px" ng-show="polygonRajaus"
                                                ng-click="removePolygonRajaus()"
                                                data-i18n-attr="{title: 'common.Remove_geometry_filter'}">
                                                <span class="fa fa-pencil-square-o"
                                                    aria-hidden="true"> </span>
                                            </button>
                                            <button class="btn btn-default" type="button"
                                                style="width: 37.16px"
                                                ng-click="showResultsOnListPage()"
                                                data-i18n-attr="{title: 'common.Show_on_listpage'}">
                                                <span class="fa fa-list" aria-hidden="true">
                                                </span>
                                            </button>
                                            <button type="button"
                                                class="btn btn-default"
                                                style="width: 37.16px"
                                                data-template-url="pages/templates/popover-address-search.html"
                                                data-auto-close="1" bs-popover
                                                data-i18n-attr="{title: 'common.Search_on_map'}">
                                                <span class="fa fa-search"
                                                    aria-hidden="true"></span>
                                             </button>
                                        </div>
                                        <div class="col-md-2">                                            
                                            <div class="form-group">
                                                <div class="col-md-12">
                                                    <button type="button"
                                                            class="btn btn-default col-md-12"
                                                            data-template-url="pages/templates/map-layer-selector.html"
                                                            data-auto-close="1" bs-popover
                                                            data-i18n-attr="{title: 'common.Select_map_layers'}"
                                                            ng-click="refreshSliders()">
                                                            <span data-i18n="common.Adjust_layers"></span> 
                                                            <span class="fa fa-dot-circle-o pull-right" ng-show="queryLayer"></span>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-md-12">
                                                        <select
                                                            class="form-control mip-text-overflow"
                                                            name="searchCount"
                                                            data-i18n-attr="{title: 'map.Amount_to_show_on_map'}"
                                                            ng-model="searchCount"
                                                            ng-change="search(undefined, undefined, false)">
                                                            <option value="50">{{show}} 50</option>
                                                            <option value="100">{{show}}
                                                                100</option>
                                                            <option value="200">{{show}}
                                                                200</option>
                                                            <option value="500">{{show}}
                                                                500</option>
                                                            <option value="1000">{{show}}
                                                                1000</option>
                                                            <option value="2000">{{show}}
                                                                2000</option>
                                                            <option value="3000">{{show}}
                                                                3000</option>
                                                            <option value="4000">{{show}}
                                                                4000</option>
                                                            <option value="5000">{{show}}
                                                                5000</option>
                                                            <option value="6000">{{show}}
                                                                6000</option>
                                                            <option value="7000">{{show}}
                                                                7000</option>
                                                            <option value="8000">{{show}}
                                                                8000</option>
                                                            <option value="9000">{{show}}
                                                                9000</option>
                                                            <option value="10000">{{show}}
                                                                10000</option>
                                                        </select>
                                                    </div>
                                                </div>
                                        </div>
                                        <div class="col-md-9 col-sm-12 col-xs-12 searchParams">
                                            <div id="content">
                                                <!-- TABIT -->
                                                <ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
                                                    <li ng-class="{active: kiinteisto_tab}">
														<input style="display: inline-block;" type="checkbox" data-i18n-attr="{title: 'common.Select_remove_layer'}"
														ng-model="kiinteisto_taso" ng-change="selectLayer(null, null, true)">
                                                        <a href="!#kiinteistot" data-toggle="tab" style="display: inline-block;" i18n="common.Estates"></a>
                                                    </li>
                                                    <li ng-class="{active: rakennus_tab}">
                                                    	<span style="margin-left:3px">
                                                    		<input style="display: inline-block;" type="checkbox" data-i18n-attr="{title: 'common.Select_remove_layer'}"
                                                    		ng-model="rakennus_taso" ng-change="selectLayer(null, null, true)">
                                                    	</span>
                                                        <a href="!#rakennukset" data-toggle="tab" style="display: inline-block;" i18n="common.Buildings"></a>
                                                    </li>
                                                    <li ng-class="{active: alue_tab}">
                                                    	<span style="margin-left:3px">
                                                    		<input style="display: inline-block;" type="checkbox" data-i18n-attr="{title: 'common.Select_remove_layer'}"
                                                    		ng-model="alue_taso" ng-change="selectLayer(null, null, true)">
                                                    	</span>
                                                        <a href="!#alueet" data-toggle="tab" style="display: inline-block;" i18n="common.Areas"></a>
                                                    </li>
                                                    <li ng-class="{active: arvoalue_tab}">
                                                    	<span style="margin-left:3px">
                                                    		<input style="display: inline-block;" type="checkbox" data-i18n-attr="{title: 'common.Select_remove_layer'}"
                                                    		ng-model="arvoalue_taso" ng-change="selectLayer(null, null, true)">
                                                    	</span>	
                                                        <a href="!#arvoalueet" data-toggle="tab" style="display: inline-block;" i18n="common.Valueareas"></a>
                                                    </li>
                                                </ul>
                                                <div id="my-tab-content" class="tab-content"
                                                    style="margin-top: 2px;">
                                                    <!-- KIINTEISTO BEGIN -->
                                                    <div class="tab-pane" ng-class="{active: kiinteisto_tab}" id="kiinteistot">
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchCounty"
                                                                        name="kunta"
                                                                        theme="bootstrap"
                                                                        ng-required="false"
                                                                        on-select="setKunta($item, $model, true); search();"
                                                                        on-remove="addItemBackToList($item, kuntaOptions); search();"
                                                                        spellcheck="false">
                                                                        <ui-select-match
                                                                            data-i18n-attr="{placeholder: 'common.County'}"
                                                                            allow-clear="true">{{$select.selected.nimi}} ({{$select.selected.kuntanumero}})</ui-select-match>
                                                                        <ui-select-choices
                                                                            repeat="kunta.id as kunta in kuntaOptions track by $index"
                                                                            refresh="getKunnat($select.search)"
                                                                            refresh-delay="250">
                                                                        <div>                                                                
                                                                            <span
                                                                                ng-bind-html="kunta.nimi | highlight: $select.search">
                                                                            </span>
                                                                            <span
                                                                                ng-bind-html="kunta.kuntanumero | highlight: $select.search">
                                                                            </span>
                                                                        </div>
                                                                        </ui-select-choices>
                                                                    </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchVillage"
                                                                        name="kyla"
                                                                        theme="bootstrap"
                                                                        ng-required="false"
                                                                        on-select="setKyla($item, $model); search();"
                                                                        on-remove="addItemBackToList($item, kylaOptions); search();"
                                                                        spellcheck="false">
                                                                        <ui-select-match
                                                                            data-i18n-attr="{placeholder: 'common.Village'}"
                                                                            allow-clear="true">{{$select.selected.nimi}} ({{$select.selected.kylanumero}}) {{$select.selected.kunta.nimi}} </ui-select-match>
                                                                        <ui-select-choices
                                                                            repeat="kyla.id as kyla in kylaOptions track by $index"
                                                                            refresh="getKylat($select.search)"
                                                                            refresh-delay="250">
                                                                        <div>                                                                
                                                                            <span
                                                                                ng-bind-html="kyla.nimi | highlight: $select.search">
                                                                            </span>
                                                                            <span
                                                                                ng-bind-html="kyla.kylanumero | highlight: $select.search">
                                                                            </span>
                                                                            <span
                                                                                ng-bind-html="kyla.kunta.nimi | highlight: $select.search">
                                                                            </span>
                                                                        </div>
                                                                        </ui-select-choices>
                                                                    </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <div class="row">
                                                                        <div
                                                                            class="col-xs-7 col-sm-7 col-md-8 col-lg-9"
                                                                            style="padding-right: 0px">
                                                                            <input type="text"
                                                                                class="form-control"
                                                                                style="border-top-right-radius: 0px; border-bottom-right-radius: 0px"
                                                                                name="village"
                                                                                data-i18n-attr="{placeholder: 'common.Property_identifier'}"
                                                                               	ng-model="searchEstateNumber"
                                                                        		ng-change="search()"
                                                                        		ng-model-options='{debounce: 500}'
                                                                        		spellcheck="false" autocomplete="off">
                                                                        </div>
                                                                        <div
                                                                            class="col-xs-5 col-sm-5 col-md-4 col-lg-3"
                                                                            style="padding-left: 0px;">
                                                                            <input type="text"
                                                                                class="form-control"
                                                                                style="border-top-left-radius: 0px; border-bottom-left-radius: 0px"
                                                                                name="villagenumber"
                                                                                data-i18n-attr="{placeholder: 'common.Number_abbr'}"
                                                                                ng-model="searchEstateColumnNumber"
                                                                                ng-change="search()"
                                                                                ng-model-options='{debounce: 500}'
                                                                                spellcheck="false" autocomplete="off">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>                                           						 	
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <input type="text"
                                                                        class="form-control"
                                                                        data-i18n-attr="{placeholder: 'common.Estate'}"
                                                                        ng-model="searchEstateName"
                                                                        ng-change="search()"
                                                                        ng-model-options='{debounce: 500}'
                                                                        spellcheck="false" autocomplete="off">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <input type="text"
                                                                        class="form-control"
                                                                        data-i18n-attr="{placeholder: 'common.Address'}"
                                                                        ng-model="searchAddress"
                                                                        ng-change="search();"
                                                                        ng-model-options='{debounce: 500}'
                                                                        spellcheck="false" autocomplete="off">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchArvotus"
                                                                        name="arvotus"
                                                                        theme="bootstrap"
                                                                        multiple="true"
                                                                        ng-required="false"
                                                                        on-select="search();"
                                                                        on-remove="addItemBackToList($item, arvotusOptions); search();"
                                                                        spellcheck="false">
                                                                    <ui-select-match
                                                                        data-i18n-attr="{placeholder: 'common.Valuation'}">{{$item | namei18n}}</ui-select-match>
                                                                    <ui-select-choices
                                                                        repeat="arvotus.id as arvotus in arvotusOptions | filter: {'nimi_fi': $select.search}">
						    										<div ng-bind-html="arvotus | namei18n | highlight: $select.search">
																		</div>
                                                                    </ui-select-choices> </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <input type="text"
                                                                        class="form-control"
                                                                        data-i18n-attr="{placeholder: 'common.Municipality'}"
                                                                        ng-model="searchPaikkakunta"
                                                                        ng-change="search();"
                                                                        ng-model-options='{debounce: 500}'
                                                                        spellcheck="false" autocomplete="off">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchInventointiprojektiId"
                                                                        theme="bootstrap"
                                                                        sortable="true"
                                                                        name="inventointiprojekti"
                                                                        ng-change="updateInventointiprojektiId($select.selected.id); clearInventors(); search();"
                                                                        close-on-select="true"
                                                                        title="{{$select.selected.nimi}} "
                                                                        spellcheck="false">
                                                                    <ui-select-match
                                                                        allow-clear="true"
                                                                        data-i18n-attr="{placeholder: 'common.Inventory_project'}">{{$select.selected.nimi}}
                                                                    </ui-select-match> <ui-select-choices
                                                                        repeat="ip.id as ip in inventointiprojektit | filter: {'nimi': $select.search} track by $index" 
                                                                        refresh="getInventointiprojektit($select.search)"
                                                                        refresh-delay="250">
                                                                    <div>
                                                                        <span
                                                                            ng-bind-html="ip.nimi | highlight: $select.search"
                                                                            title="{{ip.nimi}}"></span>
                                                                    </div>
                                                                    </ui-select-choices> </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="row">
                                                                <!-- Bug in ui-select - without own row it won't align to the left -->
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <div class="col-md-12">
                                                                            <ui-select
                                                                                ng-model="ui.searchInventoija"
                                                                                theme="bootstrap"
                                                                                sortable="true"
                                                                                name="inventoija"
                                                                                ng-change="updateInventoija($select.selected.id); search();"
                                                                                title="{{$select.selected.etunimi}} {{$select.selected.sukunimi}}"
                                                                                close-on-select="true"
                                                                                spellcheck="false">
                                                                                <ui-select-match
                                                                                    allow-clear="true"
                                                                                    data-i18n-attr="{placeholder: 'common.Inventor'}">{{$select.selected.etunimi}} {{$select.selected.sukunimi}}                                                                            
                                                                                </ui-select-match> <ui-select-choices
                                                                                    group-by="'tyyppi'"
                                                                                    repeat="inventoija.id as inventoija in inventoijat track by $index "
                                                                                    refresh="getInventoijat($select.search)"
                                                                                    refresh-delay="250">
                                                                                <div>
                                                                                    <span
                                                                                        ng-bind-html="inventoija.etunimi"
                                                                                        title="{{inventoija.etunimi}} {{inventoija.sukunimi}}">
                                                                                    </span>
                                                                                    <span
                                                                                        ng-bind-html="inventoija.sukunimi | highlight: $select.search"
                                                                                        title="{{inventoija.etunimi}} {{inventoija.sukunimi}}">
                                                                                    </span>
                                                                                    
                                                                                </div>
                                                                                </ui-select-choices> 
                                                                            </ui-select>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchLuoja"
                                                                        theme="bootstrap"
                                                                        sortable="true"
                                                                        name="luoja"
                                                                        ng-change="updateLuoja($select.selected.id); search();"
                                                                        title="{{$select.selected.etunimi}} {{$select.selected.sukunimi}}"
                                                                        close-on-select="true"
                                                                        spellcheck="false">
                                                                        <ui-select-match
                                                                            allow-clear="true"
                                                                            data-i18n-attr="{placeholder: 'common.Created_by'}">{{$select.selected.etunimi}} {{$select.selected.sukunimi}}                                                                            
                                                                        </ui-select-match> <ui-select-choices
                                                                            repeat="kayttaja.id as kayttaja in kayttajat track by $index "
                                                                            refresh="getKayttajat($select.search)"
                                                                            refresh-delay="250">
                                                                        <div>
                                                                            <span
                                                                                ng-bind-html="kayttaja.etunimi"
                                                                                title="{{kayttaja.etunimi}} {{kayttaja.sukunimi}}">
                                                                            </span>
                                                                            <span
                                                                                ng-bind-html="kayttaja.sukunimi | highlight: $select.search"
                                                                                title="{{kayttaja.etunimi}} {{kayttaja.sukunimi}}">
                                                                            </span>
                                                                            
                                                                        </div>
                                                                        </ui-select-choices> 
                                                                    </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- KIINTEISTÃ– END -->
                                                    <!-- RAKENNUS BEGIN -->
                                                    <div class="tab-pane" ng-class="{active: rakennus_tab}" id="rakennukset">
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchCounty"
                                                                        name="kunta"
                                                                        theme="bootstrap"
                                                                        ng-required="false"
                                                                        on-select="setKunta($item, $model, true); search();"
                                                                        on-remove="addItemBackToList($item, kuntaOptions); search();"
                                                                        spellcheck="false">
                                                                        <ui-select-match
                                                                            data-i18n-attr="{placeholder: 'common.County'}"
                                                                            allow-clear="true">{{$select.selected.nimi}} ({{$select.selected.kuntanumero}})</ui-select-match>
                                                                        <ui-select-choices
                                                                            repeat="kunta.id as kunta in kuntaOptions track by $index"
                                                                            refresh="getKunnat($select.search)"
                                                                            refresh-delay="250">
                                                                        <div>                                                                
                                                                            <span
                                                                                ng-bind-html="kunta.nimi | highlight: $select.search">
                                                                            </span>
                                                                            <span
                                                                                ng-bind-html="kunta.kuntanumero | highlight: $select.search">
                                                                            </span>
                                                                        </div>                                                                    
                                                                        </ui-select-choices>
                                                                    </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchVillage"
                                                                        name="kyla"
                                                                        theme="bootstrap"
                                                                        ng-required="false"
                                                                        on-select="setKyla($item, $model); search();"
                                                                        on-remove="addItemBackToList($item, kylaOptions); search();"
                                                                        spellcheck="false">
                                                                        <ui-select-match
                                                                            data-i18n-attr="{placeholder: 'common.Village'}"
                                                                            allow-clear="true">{{$select.selected.nimi}} ({{$select.selected.kylanumero}}) {{$select.selected.kunta.nimi}} </ui-select-match>
                                                                        <ui-select-choices
                                                                            repeat="kyla.id as kyla in kylaOptions track by $index"
                                                                            refresh="getKylat($select.search)"
                                                                            refresh-delay="250">
                                                                        <div>                                                                
                                                                            <span
                                                                                ng-bind-html="kyla.nimi | highlight: $select.search">
                                                                            </span>
                                                                            <span
                                                                                ng-bind-html="kyla.kylanumero | highlight: $select.search">
                                                                            </span>
                                                                            <span
                                                                                ng-bind-html="kyla.kunta.nimi | highlight: $select.search">
                                                                            </span>
                                                                        </div>
                                                                        </ui-select-choices>
                                                                    </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <div class="row">
                                                                        <div
                                                                            class="col-xs-7 col-sm-7 col-md-8 col-lg-9"
                                                                            style="padding-right: 0px">
                                                                            <input type="text"
                                                                                class="form-control"
                                                                                style="border-top-right-radius: 0px; border-bottom-right-radius: 0px"
                                                                                name="village"
                                                                                data-i18n-attr="{placeholder: 'common.Property_identifier'}"
                                                                               	ng-model="searchEstateNumber"
                                                                        		ng-change="search()"
                                                                        		ng-model-options='{debounce: 500}'
                                                                        		spellcheck="false" autocomplete="off">
                                                                        </div>
                                                                        <div
                                                                            class="col-xs-5 col-sm-5 col-md-4 col-lg-3"
                                                                            style="padding-left: 0px;">
                                                                            <input type="text"
                                                                                class="form-control"
                                                                                style="border-top-left-radius: 0px; border-bottom-left-radius: 0px"
                                                                                name="villagenumber"
                                                                                data-i18n-attr="{placeholder: 'common.Number_abbr'}"
                                                                                ng-model="searchEstateColumnNumber"
                                                                                ng-change="search()"
                                                                                ng-model-options='{debounce: 500}'
                                                                                spellcheck="false" autocomplete="off">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>                
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <input type="text"
                                                                        class="form-control"
                                                                        data-i18n-attr="{placeholder: 'common.Estate'}"
                                                                        ng-model="searchEstateName"
                                                                        ng-change="search()"
                                                                        ng-model-options='{debounce: 500}'
                                                                        spellcheck="false" autocomplete="off">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <input type="text"
                                                                        class="form-control"
                                                                        data-i18n-attr="{placeholder: 'common.Address'}"
                                                                        ng-model="searchAddress"
                                                                        ng-change="search();"
                                                                        ng-model-options='{debounce: 500}'
                                                                        spellcheck="false" autocomplete="off">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchArvotus"
                                                                        name="arvotus"
                                                                        theme="bootstrap"
                                                                        multiple="true"
                                                                        ng-required="false"
                                                                        on-select="search();"
                                                                        on-remove="addItemBackToList($item, arvotusOptions); search();"
                                                                        spellcheck="false">
                                                                    <ui-select-match
                                                                        data-i18n-attr="{placeholder: 'common.Valuation'}">{{$item | namei18n}}</ui-select-match>
                                                                    <ui-select-choices
                                                                        repeat="arvotus.id as arvotus in arvotusOptions | filter: {'nimi_fi': $select.search}">
						    										<div ng-bind-html="arvotus | namei18n | highlight: $select.search">
																		</div>
                                                                    <ui-select-choices></ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchRakennustyyppi"
                                                                        name="rakennustyyppi"
                                                                        theme="bootstrap"
                                                                        multiple="true"
                                                                        ng-required="false"
                                                                        on-select="search();"
                                                                        on-remove="addItemBackToList($item, rakennustyyppiOptions); search();"
                                                                        spellcheck="false">
                                                                    <ui-select-match
                                                                        data-i18n-attr="{placeholder: 'common.Building_type'}">{{$item | namei18n}}</ui-select-match>
                                                                    <ui-select-choices
                                                                        repeat="rakennustyyppi.id as rakennustyyppi in rakennustyyppiOptions | filter: {'nimi_fi': $select.search}">
						    										<div ng-bind-html="rakennustyyppi | namei18n | highlight: $select.search">
																		</div>
																	</ui-select-choices> </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
						                                            <ui-select 
						                                            	theme="bootstrap"
																		ng-model="ui.searchDesigner"
                                                                        ng-change="updateSuunnittelija($select.selected.id); search();"
						                                                name="suunnittelija"
						                                                spellcheck="false">
						                                                <ui-select-match 
						                                                    data-i18n-attr="{placeholder: 'common.Architect'}"
						                                                    allow-clear="true">{{$select.selected.etunimi}} {{$select.selected.sukunimi}}
						                                                </ui-select-match>
						                                                <ui-select-choices        
						                                                    repeat="suunnittelija.id as suunnittelija in suunnittelijat track by $index "
						                                                    refresh="getSuunnittelijat($select.search)"
						                                                    refresh-delay="250">
						                                                    <div>                                                                
						                                                        <span
						                                                            ng-bind-html="suunnittelija.etunimi | highlight: $select.search">
						                                                        </span>
						                                                        <span
						                                                            ng-bind-html="suunnittelija.sukunimi | highlight: $select.search">
						                                                        </span>
						                                                    </div>
						                                                </ui-select-choices> 
						                                            </ui-select>                                                                        
                                                                        
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="row">
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <div class="col-md-12">
                                                                            <input type="text"
                                                                                class="form-control"
                                                                                data-i18n-attr="{placeholder: 'common.Municipality'}"
                                                                                ng-model="searchPaikkakunta"
                                                                                ng-change="search();"
                                                                                ng-model-options='{debounce: 500}'
                                                                                spellcheck="false" autocomplete="off">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                               <!-- <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <div class="col-md-12">
                                                                            <ui-select
                                                                        ng-model="ui.searchInventointiprojektiId"
                                                                        theme="bootstrap"
                                                                        sortable="true"
                                                                        name="inventointiprojekti"
                                                                        ng-change="clearInventors(); search();"
                                                                        close-on-select="true"
                                                                        title="{{$select.selected.nimi}} "
                                                                        spellcheck="false">
                                                                    <ui-select-match
                                                                        allow-clear="true"
                                                                        data-i18n-attr="{placeholder: 'common.Inventory_project'}">{{$select.selected.nimi}}
                                                                    </ui-select-match> <ui-select-choices
                                                                        repeat="ip.id as ip in inventointiprojektit | filter: {'nimi': $select.search} track by $index" 
                                                                        refresh="getInventointiprojektit($select.search)"
                                                                        refresh-delay="250">
                                                                    <div>
                                                                        <span
                                                                            ng-bind-html="ip.nimi | highlight: $select.search"
                                                                            title="{{ip.nimi}}"></span>
                                                                    </div>
                                                                    </ui-select-choices> </ui-select>
                                                                        </div>
                                                                    </div>
                                                                </div>-->
                                                                <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchLuoja"
                                                                        theme="bootstrap"
                                                                        sortable="true"
                                                                        name="luoja"
                                                                        ng-change="updateLuoja($select.selected.id); search();"
                                                                        title="{{$select.selected.etunimi}} {{$select.selected.sukunimi}}"
                                                                        close-on-select="true"
                                                                        spellcheck="false">
                                                                        <ui-select-match
                                                                            allow-clear="true"
                                                                            data-i18n-attr="{placeholder: 'common.Created_by'}">{{$select.selected.etunimi}} {{$select.selected.sukunimi}}                                                                            
                                                                        </ui-select-match> <ui-select-choices
                                                                            repeat="kayttaja.id as kayttaja in kayttajat track by $index "
                                                                            refresh="getKayttajat($select.search)"
                                                                            refresh-delay="250">
                                                                        <div>
                                                                            <span
                                                                                ng-bind-html="kayttaja.etunimi"
                                                                                title="{{kayttaja.etunimi}} {{kayttaja.sukunimi}}">
                                                                            </span>
                                                                            <span
                                                                                ng-bind-html="kayttaja.sukunimi | highlight: $select.search"
                                                                                title="{{kayttaja.etunimi}} {{kayttaja.sukunimi}}">
                                                                            </span>
                                                                            
                                                                        </div>
                                                                        </ui-select-choices> 
                                                                    </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                            </div>
                                                        </div> 
                                                 <div class="row">  <div class="col-md-12">     
                    <div class="panel-heading collapsed  btn-default" role="tab" data-toggle="collapse"
                        data-target="#lisatiedotPanel" style="cursor:pointer;">
                        <h4 class="panel-title">
                            <span i18n="common.Detailed_search"></span>
                            <span class="pull-right glyphicon clickable_space collapsed-indicator"></span>
                        </h4>
                    </div>
                    <div class="panel-body form-horizontal panel-collapse collapse"
                        id="lisatiedotPanel" style="margin-bottom: 1em;">
                        <div class="row">                            
                            <div class="col-md-12 col-sm-12 col-xs-12">                                                              
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                            <input type="text" class="form-control"
                                                name="rakennustyypin_kuvaus"
                                                ng-model="searchRakennustyypin_kuvaus"
                                                ng-change="search()" ng-model-options='{debounce: 500}'
                                                data-i18n-attr="{placeholder: 'common.Building_type_description'}"
                                                spellcheck="false"
                                                autocomplete="off">
                                        </div>
                                </div>
                                <div class="form-group col-md-3">                                    
                                    <div class="col-md-12">
                                        <div class="input-group">
                                                <input type="number" class="form-control" name="rakennusvuosi_alku"
                                                    ng-model="searchRakennusvuosi_alku" ng-change="search()" ng-model-options='{debounce: 500}'
                                                    data-i18n-attr="{placeholder: 'common.Construction_year_start'}"
                                                    spellcheck="false"
                                                    autocomplete="off">                                                
                                                    <span class="input-group-addon">-</span>
                                                <input type="number" class="form-control" name="rakennusvuosi_lopetus"
                                                    ng-model="searchRakennusvuosi_lopetus" ng-change="search()" ng-model-options='{debounce: 500}'
                                                    data-i18n-attr="{placeholder: 'common.Construction_year_end'}"
                                                    spellcheck="false"
                                                    autocomplete="off">                                                 
                                    </div></div>
                                </div>
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">

                                            <input type="text" class="form-control"
                                                name="rakennusvuosi_kuvaus" ng-change="search()" ng-model-options='{debounce: 500}'
                                                ng-model="searchRakennusvuosi_kuvaus"
                                                data-i18n-attr="{placeholder: 'common.Construction_year_description'}"
                                                spellcheck="false"
                                                autocomplete="off">
                                    </div>
                                </div>   
                                <div class="form-group col-md-3">                                    
                                    <div class="col-md-12">
                                    <div class="input-group">
                                                <input type="number" class="form-control" name="muutosvuosi_alku"
                                                    ng-model="searchMuutosvuosi_alku" ng-change="search()" ng-model-options='{debounce: 500}'
                                                    data-i18n-attr="{placeholder: 'common.Alteration_year_start'}"
                                                    spellcheck="false"
                                                    autocomplete="off">                                                
                                                    <span class="input-group-addon">-</span>
                                                <input type="number" class="form-control" name="muutosvuosi_lopetus"
                                                    ng-model="searchMuutosvuosi_lopetus" ng-change="search()" ng-model-options='{debounce: 500}'
                                                    data-i18n-attr="{placeholder: 'common.Alteration_year_end'}"
                                                    spellcheck="false"
                                                    autocomplete="off">                                                  
                                    </div></div>
                                </div>                                
                                
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                            <input type="text" class="form-control"
                                                name="muutosvuosi_kuvaus" ng-change="search()" ng-model-options='{debounce: 500}'
                                                ng-model="searchMuutosvuosi_kuvaus"
                                                data-i18n-attr="{placeholder: 'common.Alteration_year_description'}"
                                                spellcheck="false"
                                                autocomplete="off">
                                    </div>
                                </div>  
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                            <ui-select ng-model="ui.searchAlkuperainen_kaytto"
                                                name="alkuperainen_kaytto" theme="bootstrap" multiple="true"
                                                ng-required="false"
                                                on-select="search();"
                                                on-remove="addItemBackToList($item, alkuperainen_kayttoOptions); search();"
                                                spellcheck="false">
                                            <ui-select-match data-i18n-attr="{placeholder: 'common.Original_usage'}">{{$item | namei18n}}</ui-select-match>
                                            <ui-select-choices
                                                repeat="alkuperainen_kaytto.id as alkuperainen_kaytto in alkuperainen_kayttoOptions | filter: {'nimi_fi': $select.search}">
                                            <div ng-bind-html="alkuperainen_kaytto | namei18n | highlight: $select.search">
                                                </div>
                                            </ui-select-choices> </ui-select>                                            
                                    </div>
                                </div>                                
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                            <ui-select ng-model="ui.searchNykykaytto"
                                                name="nykykaytto" theme="bootstrap" multiple="true"
                                                ng-required="false" on-select="search();"
                                                on-remove="addItemBackToList($item, nykykayttoOptions); search();"
                                                spellcheck="false">
                                            <ui-select-match data-i18n-attr="{placeholder: 'common.Common_usage'}">{{$item | namei18n}}</ui-select-match>
                                            <ui-select-choices
                                                repeat="nykykaytto.id as nykykaytto in nykykayttoOptions | filter: {'nimi_fi': $select.search}">
                                            <div ng-bind-html="nykykaytto | namei18n | highlight: $select.search">
                                                </div>
                                            </ui-select-choices> </ui-select>                                            
                                    </div>
                                </div>
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                            <ui-select ng-model="ui.searchPerustus"
                                                name="perustus" theme="bootstrap" multiple="true"
                                                ng-required="false" on-select="search();"
                                                on-remove="addItemBackToList($item, perustusOptions); search();"
                                                spellcheck="false">
                                            <ui-select-match data-i18n-attr="{placeholder: 'common.Foundation'}">{{$item | namei18n}}</ui-select-match>
                                            <ui-select-choices
                                                repeat="perustus.id as perustus in perustusOptions | filter: {'nimi_fi': $select.search}">
                                            <div ng-bind-html="perustus | namei18n | highlight: $select.search">
                                                </div>
                                            </ui-select-choices> </ui-select>                                            
                                    </div>
                                </div>
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                            <ui-select ng-model="ui.searchRunko"
                                                name="runko" theme="bootstrap" multiple="true"
                                                ng-required="false" on-select="search();"
                                                on-remove="addItemBackToList($item, runkoOptions); search();"
                                                spellcheck="false">
                                            <ui-select-match data-i18n-attr="{placeholder: 'common.Frame'}">{{$item | namei18n}}</ui-select-match>
                                            <ui-select-choices
                                                repeat="runko.id as runko in runkoOptions | filter: {'nimi_fi': $select.search}">
                                            <div ng-bind-html="runko | namei18n | highlight: $select.search">
                                                </div>
                                            </ui-select-choices> </ui-select>                                            
                                    </div>
                                </div>
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                            <ui-select ng-model="ui.searchVuoraus"
                                                name="vuoraus" theme="bootstrap" multiple="true"
                                                ng-required="false" on-select="search();"
                                                on-remove="addItemBackToList($item, vuorausOptions); search();"
                                                spellcheck="false">
                                            <ui-select-match data-i18n-attr="{placeholder: 'common.Lining'}">{{$item | namei18n}}</ui-select-match>
                                            <ui-select-choices
                                                repeat="vuoraus.id as vuoraus in vuorausOptions | filter: {'nimi_fi': $select.search}">
                                            <div ng-bind-html="vuoraus | namei18n | highlight: $select.search">
                                                </div>
                                            </ui-select-choices> </ui-select>                                            
                                    </div>
                                </div>
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                            <ui-select ng-model="ui.searchKatto"
                                                name="katto" theme="bootstrap" multiple="true"
                                                ng-required="false" on-select="search();"
                                                on-remove="addItemBackToList($item, kattoOptions); search();"
                                                spellcheck="false">
                                            <ui-select-match data-i18n-attr="{placeholder: 'common.Ceiling'}">{{$item | namei18n}}</ui-select-match>
                                            <ui-select-choices
                                                repeat="katto.id as katto in kattoOptions | filter: {'nimi_fi': $select.search}">
                                            <div ng-bind-html="katto | namei18n | highlight: $select.search">
                                                </div>
                                            </ui-select-choices> </ui-select>                                            
                                    </div>
                                </div>
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                            <ui-select ng-model="ui.searchKate"
                                                name="kate" theme="bootstrap" multiple="true"
                                                ng-required="false" on-select="search();"
                                                on-remove="addItemBackToList($item, kateOptions); search();"
                                                spellcheck="false">
                                            <ui-select-match data-i18n-attr="{placeholder: 'common.Cover'}">{{$item | namei18n}}</ui-select-match>
                                            <ui-select-choices
                                                repeat="kate.id as kate in kateOptions | filter: {'nimi_fi': $select.search}">
                                            <div ng-bind-html="kate | namei18n | highlight: $select.search">
                                                </div>
                                            </ui-select-choices> </ui-select>                                            
                                    </div>
                                </div>
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                            <ui-select ng-model="ui.searchKunto"
                                                name="kunto" theme="bootstrap" multiple="true"
                                                ng-required="false" on-select="search();"
                                                on-remove="addItemBackToList($item, kuntoOptions); search();"
                                                spellcheck="false">
                                            <ui-select-match data-i18n-attr="{placeholder: 'common.Condition'}">{{$item | namei18n}}</ui-select-match>
                                            <ui-select-choices
                                                repeat="kunto.id as kunto in kuntoOptions | filter: {'nimi_fi': $select.search}">
                                            <div ng-bind-html="kunto | namei18n | highlight: $select.search">
                                                </div>
                                            </ui-select-choices> </ui-select>                                            
                                    </div>
                                </div>
                                <div class="form-group col-md-3">
                                    <div class="col-md-12"> 
                                            <ui-select ng-model="ui.searchNykytyyli"
                                                name="nykytyyli" theme="bootstrap" multiple="true"
                                                ng-required="false" on-select="search();"
                                                on-remove="addItemBackToList($item, nykytyyliOptions); search();"
                                                spellcheck="false">
                                            <ui-select-match data-i18n-attr="{placeholder: 'common.Contemporary_style'}">{{$item | namei18n}}</ui-select-match>
                                            <ui-select-choices
                                                repeat="nykytyyli.id as nykytyyli in nykytyyliOptions | filter: {'nimi_fi': $select.search}">
                                            <div ng-bind-html="nykytyyli | namei18n | highlight: $select.search">
                                                </div>
                                            </ui-select-choices> </ui-select>                                            
                                    </div>
                                </div>
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                            <ui-select ng-model="ui.searchPurettu"
                                                name="katto" theme="bootstrap" multiple="true"
                                                ng-required="false" on-select="search();"
                                                on-remove="addItemBackToList($item, purettuOptions); search();"
                                                spellcheck="false">
                                            <ui-select-match data-i18n-attr="{placeholder: 'common.Demolished'}">{{$item.label}}</ui-select-match>
                                            <ui-select-choices
                                                repeat="purettu.value as purettu in purettuOptions | filter: {'label': $select.search}">
                                            <div ng-bind-html="purettu.label | highlight: $select.search">
                                                </div>
                                            </ui-select-choices> </ui-select>                                            
                                    </div>
                                </div>
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                            <ui-select ng-model="ui.searchKulttuurihistorialliset_arvot"
                                                name="kulttuurihistorialliset_arvot" theme="bootstrap" multiple="true"
                                                ng-required="false" on-select="search();"
                                                on-remove="addItemBackToList($item, kulttuurihistorialliset_arvotOptions); search();"
                                                spellcheck="false">
                                            <ui-select-match data-i18n-attr="{placeholder: 'common.Culturohistorical_values'}">{{$item | namei18n}}</ui-select-match>
                                            <ui-select-choices
                                                repeat="kulttuurihistorialliset_arvot.id as kulttuurihistorialliset_arvot in kulttuurihistorialliset_arvotOptions | filter: {'nimi_fi': $select.search}">
                                            <div ng-bind-html="kulttuurihistorialliset_arvot | namei18n | highlight: $select.search">
                                                </div>
                                            </ui-select-choices> </ui-select>                                            
                                    </div>
                                </div>
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                            <input type="text" class="form-control"
                                                name="kuvaukset" ng-change="search()" ng-model-options='{debounce: 500}'
                                                ng-model="searchKuvaukset"
                                                data-i18n-attr="{placeholder: 'common.Descriptions'}"
                                                spellcheck="false"
                                                autocomplete="off">
                                    </div>
                                </div>   
                                                            
                            </div>                          
                        </div>
                    </div>
</div></div>



                                                     
                                                    </div>
                                                    <!-- RAKENNUS END -->
                                                    <!-- ALUEET BEGIN -->
                                                    <div class="tab-pane" ng-class="{active: alue_tab}" id="alueet">
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchCounty"
                                                                        name="kunta"
                                                                        theme="bootstrap"
                                                                        on-select="setKunta($item, $model, true); search();"
                                                                        on-remove="addItemBackToList($item, kuntaOptions); search();"
                                                                        spellcheck="false">
                                                                        <ui-select-match
                                                                            data-i18n-attr="{placeholder: 'common.County'}"
                                                                            allow-clear="true">{{$select.selected.nimi}} ({{$select.selected.kuntanumero}})</ui-select-match>
                                                                        <ui-select-choices
                                                                            repeat="kunta.id as kunta in kuntaOptions track by $index"
                                                                            refresh="getKunnat($select.search)"
                                                                            refresh-delay="250">
                                                                            <div>                                                                
                                                                                <span
                                                                                    ng-bind-html="kunta.nimi | highlight: $select.search">
                                                                                </span>
                                                                                <span
                                                                                    ng-bind-html="kunta.kuntanumero | highlight: $select.search">
                                                                                </span>
                                                                            </div>                                                                    
                                                                        </ui-select-choices>
                                                                    </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchVillage"
                                                                        name="kyla"
                                                                        theme="bootstrap"
                                                                        ng-required="false"
                                                                        on-select="setKyla($item, $model); search();"
                                                                        on-remove="addItemBackToList($item, kylaOptions); search();"
                                                                        spellcheck="false">
                                                                        <ui-select-match
                                                                            data-i18n-attr="{placeholder: 'common.Village'}"
                                                                            allow-clear="true">{{$select.selected.nimi}} ({{$select.selected.kylanumero}}) {{$select.selected.kunta.nimi}} </ui-select-match>
                                                                        <ui-select-choices
                                                                            repeat="kyla.id as kyla in kylaOptions track by $index"
                                                                            refresh="getKylat($select.search)"
                                                                            refresh-delay="250">
                                                                        <div>                                                                
                                                                            <span
                                                                                ng-bind-html="kyla.nimi | highlight: $select.search">
                                                                            </span>
                                                                            <span
                                                                                ng-bind-html="kyla.kylanumero | highlight: $select.search">
                                                                            </span>
                                                                            <span
                                                                                ng-bind-html="kyla.kunta.nimi | highlight: $select.search">
                                                                            </span>
                                                                        </div>
                                                                        </ui-select-choices>
                                                                    </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <input type="text"
                                                                        class="form-control"
                                                                        data-i18n-attr="{placeholder: 'common.Area'}"
                                                                        ng-model="searchAreaName"
                                                                        ng-change="search()"
                                                                        ng-model-options='{debounce: 500}'
                                                                        spellcheck="false" autocomplete="off">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <input type="text"
                                                                        class="form-control"
                                                                        data-i18n-attr="{placeholder: 'common.Municipality'}"
                                                                        ng-model="searchPaikkakunta"
                                                                        ng-change="search();"
                                                                        ng-model-options='{debounce: 500}'
                                                                        spellcheck="false" autocomplete="off">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchInventointiprojektiId"
                                                                        theme="bootstrap"
                                                                        sortable="true"
                                                                        name="inventointiprojekti"
                                                                        ng-change="clearInventors(); search();"
                                                                        close-on-select="true"
                                                                        title="{{$select.selected.nimi}} "
                                                                        spellcheck="false">
                                                                    <ui-select-match
                                                                        allow-clear="true"
                                                                        data-i18n-attr="{placeholder: 'common.Inventory_project'}">{{$select.selected.nimi}}
                                                                    </ui-select-match> <ui-select-choices
                                                                        repeat="ip.id as ip in inventointiprojektit | filter: {'nimi': $select.search} track by $index" 
                                                                        refresh="getInventointiprojektit($select.search)"
                                                                        refresh-delay="250">
                                                                    <div>
                                                                        <span
                                                                            ng-bind-html="ip.nimi | highlight: $select.search"
                                                                            title="{{ip.nimi}}"></span>
                                                                    </div>
                                                                    </ui-select-choices> </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchInventoija"
                                                                        theme="bootstrap"
                                                                        sortable="true"
                                                                        name="inventoija"
                                                                        ng-change="updateInventoija($select.selected.id); search();"
                                                                        title="{{$select.selected.etunimi}} {{$select.selected.sukunimi}}"
                                                                        close-on-select="true"
                                                                        spellcheck="false">
                                                                        <ui-select-match
                                                                            allow-clear="true"
                                                                            data-i18n-attr="{placeholder: 'common.Inventor'}">{{$select.selected.etunimi}} {{$select.selected.sukunimi}}                                                                            
                                                                        </ui-select-match> <ui-select-choices
                                                                            group-by="'tyyppi'"
                                                                            repeat="inventoija.id as inventoija in inventoijat track by $index "
                                                                            refresh="getInventoijat($select.search)"
                                                                            refresh-delay="250">
                                                                        <div>
                                                                            <span
                                                                                ng-bind-html="inventoija.etunimi"
                                                                                title="{{inventoija.etunimi}} {{inventoija.sukunimi}}">
                                                                            </span>
                                                                            <span
                                                                                ng-bind-html="inventoija.sukunimi | highlight: $select.search"
                                                                                title="{{inventoija.etunimi}} {{inventoija.sukunimi}}">
                                                                            </span>
                                                                            
                                                                        </div>
                                                                        </ui-select-choices> 
                                                                    </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchLuoja"
                                                                        theme="bootstrap"
                                                                        sortable="true"
                                                                        name="luoja"
                                                                        ng-change="updateLuoja($select.selected.id); search();"
                                                                        title="{{$select.selected.etunimi}} {{$select.selected.sukunimi}}"
                                                                        close-on-select="true"
                                                                        spellcheck="false">
                                                                        <ui-select-match
                                                                            allow-clear="true"
                                                                            data-i18n-attr="{placeholder: 'common.Created_by'}">{{$select.selected.etunimi}} {{$select.selected.sukunimi}}                                                                            
                                                                        </ui-select-match> <ui-select-choices
                                                                            repeat="kayttaja.id as kayttaja in kayttajat track by $index "
                                                                            refresh="getKayttajat($select.search)"
                                                                            refresh-delay="250">
                                                                        <div>
                                                                            <span
                                                                                ng-bind-html="kayttaja.etunimi"
                                                                                title="{{kayttaja.etunimi}} {{kayttaja.sukunimi}}">
                                                                            </span>
                                                                            <span
                                                                                ng-bind-html="kayttaja.sukunimi | highlight: $select.search"
                                                                                title="{{kayttaja.etunimi}} {{kayttaja.sukunimi}}">
                                                                            </span>
                                                                            
                                                                        </div>
                                                                        </ui-select-choices> 
                                                                    </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- ALUEET END -->
                                                    <!-- ARVOALUEET BEGIN -->
                                                    <div class="tab-pane" ng-class="{active: arvoalue_tab}" id="arvoalueet">
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchCounty"
                                                                        name="kunta"
                                                                        theme="bootstrap"
                                                                        ng-required="false"
                                                                        on-select="setKunta($item, $model, true); search();"
                                                                        on-remove="addItemBackToList($item, kuntaOptions); search();"
                                                                        spellcheck="false">
                                                                        <ui-select-match
                                                                            data-i18n-attr="{placeholder: 'common.County'}"
                                                                            allow-clear="true">{{$select.selected.nimi}} ({{$select.selected.kuntanumero}})</ui-select-match>
                                                                        <ui-select-choices
                                                                            repeat="kunta.id as kunta in kuntaOptions track by $index"
                                                                            refresh="getKunnat($select.search)"
                                                                            refresh-delay="250">
                                                                        <div>                                                                
                                                                            <span
                                                                                ng-bind-html="kunta.nimi | highlight: $select.search">
                                                                            </span>
                                                                            <span
                                                                                ng-bind-html="kunta.kuntanumero | highlight: $select.search">
                                                                            </span>
                                                                        </div>
                                                                        </ui-select-choices>
                                                                    </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchVillage"
                                                                        name="kyla"
                                                                        theme="bootstrap"
                                                                        ng-required="false"
                                                                        on-select="setKyla($item, $model); search();"
                                                                        on-remove="addItemBackToList($item, kylaOptions); search();"
                                                                        spellcheck="false">
                                                                        <ui-select-match
                                                                            data-i18n-attr="{placeholder: 'common.Village'}"
                                                                            allow-clear="true">{{$select.selected.nimi}} ({{$select.selected.kylanumero}}) {{$select.selected.kunta.nimi}} </ui-select-match>
                                                                        <ui-select-choices
                                                                            repeat="kyla.id as kyla in kylaOptions track by $index"
                                                                            refresh="getKylat($select.search)"
                                                                            refresh-delay="250">
                                                                        <div>                                                                
                                                                            <span
                                                                                ng-bind-html="kyla.nimi | highlight: $select.search">
                                                                            </span>
                                                                            <span
                                                                                ng-bind-html="kyla.kylanumero | highlight: $select.search">
                                                                            </span>
                                                                            <span
                                                                                ng-bind-html="kyla.kunta.nimi | highlight: $select.search">
                                                                            </span>
                                                                        </div>
                                                                        </ui-select-choices>
                                                                    </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <input type="text"
                                                                        class="form-control"
                                                                        data-i18n-attr="{placeholder: 'common.Area'}"
                                                                        ng-model="searchAreaName"
                                                                        ng-change="search()"
                                                                        ng-model-options='{debounce: 500}'
                                                                        spellcheck="false" autocomplete="off">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <input type="text"
                                                                        class="form-control"
                                                                        data-i18n-attr="{placeholder: 'common.Valuearea'}"
                                                                        ng-model="searchValueareaName"
                                                                        ng-change="search()"
                                                                        ng-model-options='{debounce: 500}'
                                                                        spellcheck="false" autocomplete="off">
                                                                </div>
                                                            </div>
                                                        </div>                                                       
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchAluetyyppi"
                                                                        name="aluetyyppi"
                                                                        theme="bootstrap"
                                                                        multiple="true"
                                                                        ng-required="false"
                                                                        on-select="search();"
                                                                        on-remove="addItemBackToList($item, aluetyyppiOptions); search();"
                                                                        spellcheck="false">
                                                                    <ui-select-match
                                                                        data-i18n-attr="{placeholder: 'common.Area_type'}">{{$item | namei18n}}</ui-select-match>
                                                                    <ui-select-choices
                                                                        repeat="aluetyyppi.id as aluetyyppi in aluetyyppiOptions | filter: {'nimi_fi': $select.search}">
						    										<div ng-bind-html="aluetyyppi | namei18n | highlight: $select.search">
																		</div>
                                                                    </ui-select-choices> </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchArvotus"
                                                                        name="arvotus"
                                                                        theme="bootstrap"
                                                                        multiple="true"
                                                                        ng-required="false"
                                                                        on-select="search();"
                                                                        on-remove="addItemBackToList($item, arvotusOptions); search();"
                                                                        spellcheck="false">
                                                                    <ui-select-match
                                                                        data-i18n-attr="{placeholder: 'common.Valuation'}">{{$item | namei18n}}</ui-select-match>
                                                                    <ui-select-choices
                                                                        repeat="arvotus.id as arvotus in arvotusOptions | filter: {'nimi_fi': $select.search}">
						    										<div ng-bind-html="arvotus | namei18n | highlight: $select.search">
																		</div>
                                                                    </ui-select-choices> </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <input type="text"
                                                                        class="form-control"
                                                                        data-i18n-attr="{placeholder: 'common.Municipality'}"
                                                                        ng-model="searchPaikkakunta"
                                                                        ng-change="search();"
                                                                        ng-model-options='{debounce: 500}'
                                                                        spellcheck="false" autocomplete="off">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                   <ui-select
                                                                        ng-model="ui.searchInventointiprojektiId"
                                                                        theme="bootstrap"
                                                                        sortable="true"
                                                                        name="inventointiprojekti"
                                                                        ng-change="clearInventors(); search();"
                                                                        close-on-select="true"
                                                                        title="{{$select.selected.nimi}} "
                                                                        spellcheck="false">
                                                                    <ui-select-match
                                                                        allow-clear="true"
                                                                        data-i18n-attr="{placeholder: 'common.Inventory_project'}">{{$select.selected.nimi}}
                                                                    </ui-select-match> <ui-select-choices
                                                                        repeat="ip.id as ip in inventointiprojektit | filter: {'nimi': $select.search} track by $index" 
                                                                        refresh="getInventointiprojektit($select.search)"
                                                                        refresh-delay="250">
                                                                    <div>
                                                                        <span
                                                                            ng-bind-html="ip.nimi | highlight: $select.search"
                                                                            title="{{ip.nimi}}"></span>
                                                                    </div>
                                                                    </ui-select-choices> </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <!-- Bug in ui-select - without own row it won't align to the left -->
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <div class="col-md-12">
                                                                            <ui-select
                                                                                ng-model="ui.searchInventoija"
                                                                                theme="bootstrap"
                                                                                sortable="true"
                                                                                name="inventoija"
                                                                                ng-change="updateInventoija($select.selected.id); search();"
                                                                                title="{{$select.selected.etunimi}} {{$select.selected.sukunimi}}"
                                                                                close-on-select="true"
                                                                                spellcheck="false">
                                                                                <ui-select-match
                                                                                    allow-clear="true"
                                                                                    data-i18n-attr="{placeholder: 'common.Inventor'}">{{$select.selected.etunimi}} {{$select.selected.sukunimi}}                                                                            
                                                                                </ui-select-match> <ui-select-choices
                                                                                    group-by="'tyyppi'"
                                                                                    repeat="inventoija.id as inventoija in inventoijat track by $index "
                                                                                    refresh="getInventoijat($select.search)"
                                                                                    refresh-delay="250">
                                                                                <div>
                                                                                    <span
                                                                                        ng-bind-html="inventoija.etunimi"
                                                                                        title="{{inventoija.etunimi}} {{inventoija.sukunimi}}">
                                                                                    </span>
                                                                                    <span
                                                                                        ng-bind-html="inventoija.sukunimi | highlight: $select.search"
                                                                                        title="{{inventoija.etunimi}} {{inventoija.sukunimi}}">
                                                                                    </span>
                                                                                    
                                                                                </div>
                                                                                </ui-select-choices> 
                                                                            </ui-select>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                            <div class="form-group">
                                                                <div class="col-md-12">
                                                                    <ui-select
                                                                        ng-model="ui.searchLuoja"
                                                                        theme="bootstrap"
                                                                        sortable="true"
                                                                        name="luoja"
                                                                        ng-change="updateLuoja($select.selected.id); search();"
                                                                        title="{{$select.selected.etunimi}} {{$select.selected.sukunimi}}"
                                                                        close-on-select="true"
                                                                        spellcheck="false">
                                                                        <ui-select-match
                                                                            allow-clear="true"
                                                                            data-i18n-attr="{placeholder: 'common.Created_by'}">{{$select.selected.etunimi}} {{$select.selected.sukunimi}}                                                                            
                                                                        </ui-select-match> <ui-select-choices
                                                                            repeat="kayttaja.id as kayttaja in kayttajat track by $index "
                                                                            refresh="getKayttajat($select.search)"
                                                                            refresh-delay="250">
                                                                        <div>
                                                                            <span
                                                                                ng-bind-html="kayttaja.etunimi"
                                                                                title="{{kayttaja.etunimi}} {{kayttaja.sukunimi}}">
                                                                            </span>
                                                                            <span
                                                                                ng-bind-html="kayttaja.sukunimi | highlight: $select.search"
                                                                                title="{{kayttaja.etunimi}} {{kayttaja.sukunimi}}">
                                                                            </span>
                                                                            
                                                                        </div>
                                                                        </ui-select-choices> 
                                                                    </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- ARVOALUEET END -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-12" style="margin-bottom: 1em;">
            <openlayers id="mapPageMainMap"
                style="height: 500px; width: 100%; margin-left: auto; margin-right: auto"
                ol-center="center" ol-markers="markers" ol-defaults="defaults" custom-layers="true">
            <ol-control name="{{ control.name }}"
                ng-repeat="control in controls|filter:{active: true}"> </ol-control> <ol-layer
                ol-layer-properties="layer" ng-repeat="layer in layers|filter:{active:true}">
            </ol-layer> <ol-marker ng-repeat="marker in markers" lat="marker.lat" lon="marker.lon"></ol-marker>
            </openlayers>
        </div>
        <div id="info" class="col-md-12">&nbsp;</div>
        <!--
		<h5>bounds: {{ center.bounds | json }}</h5>
		<h5>boundsLonLat: {{ boundsLonLat | json }}</h5>
		<h3>smallerBounds: {{ smallerBounds | json }}</h3>
		 -->
        <div id="mapPopup" class="mapPopup" style="position: absolute;">POPUP</div>
        <!-- Override the fixed position to keep the popup close to the mouse -->
        <div class="row">
            <nav ng-show="selectedLayers.indexOf('Kiinteistot') > -1">
                <div class="col-md-3">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label class="col-md-12">
                                <span i18n="common.Estates"></span>
                                ({{kiinteistoTotal}})
                            </label>
                            <div class="col-md-12">
                                <ul class="pagination">
                                    <li ng-class="{'page-item': true, 'active': page.active}"
                                        ng-repeat="page in kiinteistoPages">
                                        <a class="page-link" ng-click="changeKiinteistoPage(page)">{{page.id}}</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
            <nav ng-show="selectedLayers.indexOf('Rakennukset') > -1">
                <div class="col-md-3">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label class="col-md-12">
                                <span i18n="common.Buildings"></span>
                                ({{rakennusTotal}})
                            </label>
                            <div class="col-md-12">
                                <ul class="pagination">
                                    <li ng-class="{'page-item': true, 'active': page.active}"
                                        ng-repeat="page in rakennusPages">
                                        <a class="page-link" ng-click="changeRakennusPage(page)">{{page.id}}</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
            <nav ng-show="selectedLayers.indexOf('Alueet') > -1">
                <div class="col-md-3">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label for="searchName" class="col-md-12">
                                <span i18n="common.Areas"></span>
                                ({{alueTotal}})
                            </label>
                            <div class="col-md-12">
                                <ul class="pagination">
                                    <li ng-class="{'page-item': true, 'active': page.active}"
                                        ng-repeat="page in aluePages">
                                        <a class="page-link" ng-click="changeAluePage(page)">{{page.id}}</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
            <nav ng-show="selectedLayers.indexOf('Arvoalueet') > -1">
                <div class="col-md-3">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label for="searchName" class="col-md-12">
                                <span i18n="common.Valueareas"></span>
                                ({{arvoalueTotal}})
                            </label>
                            <div class="col-md-12">
                                <ul class="pagination">
                                    <li ng-class="{'page-item': true, 'active': page.active}"
                                        ng-repeat="page in arvoaluePages">
                                        <a class="page-link" ng-click="changeArvoaluePage(page)">{{page.id}}</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
    </div>
</div>